<?xml version="1.0" encoding="UTF-8"?>
<api context="/ceridian" name="CeridianDemoAPI" xmlns="http://ws.apache.org/ns/synapse">
    <resource methods="GET" uri-template="/employees">
        <inSequence>
            <ceridiandayforce.init>
                <username>DFWSTest</username>
                <password>DFWSTest</password>
                <clientNamespace>ustest232-services.dayforcehcm.com/Api/ddn</clientNamespace>
                <httpRequestTimeout>10000</httpRequestTimeout>
                <apiVersion>V1</apiVersion>
            </ceridiandayforce.init>
            <ceridiandayforce.getEmployees/>
            <send/>
        </inSequence>
        <outSequence/>
        <faultSequence/>
    </resource>
    <resource methods="GET" uri-template="/employee/{xref}">
        <inSequence>
            <property expression="wso2:vault-lookup('ceridian.username')" name="ceridian.username" scope="default" type="STRING"/>
            <property expression="wso2:vault-lookup('ceridian.password')" name="password" scope="default" type="STRING"/>
            <property expression="wso2:vault-lookup('ceridian.user.domain')" name="ceridian.user.domain" scope="default" type="STRING"/>
            <property expression="wso2:vault-lookup('ceridian.api.version')" name="ceridian.api.version" scope="default" type="STRING"/>
            <ceridiandayforce.init>
                <username>{$ctx:ceridian.username}</username>
                <password>{$ctx:ceridian.password}</password>
                <clientNamespace>$SYSTEM:ceridian.user.domain</clientNamespace>
                <apiVersion>$SYSTEM:ceridian.api.version</apiVersion>
            </ceridiandayforce.init>
            <ceridiandayforce.getEmployeeDetails>
                <xRefCode>{get-property('uri.var.xref')}</xRefCode>
            </ceridiandayforce.getEmployeeDetails>
            <send/>
        </inSequence>
        <outSequence/>
        <faultSequence/>
    </resource>
</api>
