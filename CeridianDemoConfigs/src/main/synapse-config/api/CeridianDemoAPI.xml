<?xml version="1.0" encoding="UTF-8"?>
<api context="/ceridian" name="CeridianDemoAPI" xmlns="http://ws.apache.org/ns/synapse">
    <resource methods="GET" uri-template="/employees">
        <inSequence>
            <ceridiandayforce.init>
                <username>{get-property('env','ceridianUsername')}</username>
                <password>{get-property('env','ceridianPassword')}</password>
                <clientNamespace>{get-property('env','ceridianClientNS')}</clientNamespace>
                <httpRequestTimeout>10000</httpRequestTimeout>
                <apiVersion>{get-property('env','ceridianAPIVersion')}</apiVersion>
            </ceridiandayforce.init>
            <ceridiandayforce.getEmployees/>
            <send/>
        </inSequence>
        <outSequence/>
        <faultSequence/>
    </resource>
    <resource methods="GET" uri-template="/employee/{xref}">
        <inSequence>
            <log level="custom">
                <property expression="get-property('env','ceridianUsername')" name="ceridian.username"/>
                <property expression="get-property('env','ceridianPassword')" name="ceridian.password"/>
                <property expression="get-property('env','ceridianClientNS')" name="ceridian.client.ns"/>
                <property expression="get-property('env','ceridianAPIVersion')" name="ceridian.api.version"/>
            </log>
            <ceridiandayforce.init>
                <username>{get-property('env','ceridianUsername')}</username>
                <password>{get-property('env','ceridianPassword')}</password>
                <clientNamespace>{get-property('env','ceridianClientNS')}</clientNamespace>
                <apiVersion>{get-property('env','ceridianAPIVersion')}</apiVersion>
            </ceridiandayforce.init>
            <ceridiandayforce.getEmployeeDetails>
                <xRefCode>{get-property('uri.var.xref')}</xRefCode>
            </ceridiandayforce.getEmployeeDetails>
            <send/>
        </inSequence>
        <outSequence/>
        <faultSequence/>
    </resource>
</api>
